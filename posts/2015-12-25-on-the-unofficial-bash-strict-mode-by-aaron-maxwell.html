<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>On the Unofficial Bash Strict Mode by Aaron Maxwell - Pang Yan Han's blog</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="author" content="Pang Yan Han">
        <meta name="twitter:card" content="summary_large_image" />
        <meta name="twitter:creator" content="@yanhan_pang" />
        <meta name="twitter:title" content="On the Unofficial Bash Strict Mode by Aaron Maxwell" />
        <link rel="stylesheet" href="../css/normalize.css">
        <link rel="stylesheet" href="../css/foundation.min.css">
        <link rel="stylesheet" href="../css/responsive-nav.css">
        <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Inconsolata" rel="stylesheet" type="text/css">

        <!-- syntax highlighting CSS -->
        <link rel="stylesheet" href="../css/my-pygments-colorscheme.css">
        <link rel="stylesheet" href="../css/main.css">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css">

        <script src="../js/vendor/modernizr.js"></script>
        <script src="../js/responsive-nav.min.js"></script>
        <script type="text/x-mathjax-config">
          MathJax.Hub.Config({
            tex2jax: {
              inlineMath: [ ["\\(", "\\)"] ],
              processEscapes: true
            }
          });
        </script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
        </script>
        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-49506023-1"></script>
        <script>
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());

          gtag('config', 'UA-49506023-1');
        </script>
    </head>

    <body>
      <div class="site">
        <div class="row">
          <div class="small-6 columns">
            <h1 class="title"><a href="../">Pang Yan Han's blog</a></h1>
          </div>
          <div class="small-6 columns">
            <div class="header-icons header-icons-translate show-for-medium-up">
              <a href="../atom.xml" target="_blank">
                <i class="fa fa-rss-square fa-4x"></i>
              </a>
              <a href="https://github.com/yanhan" target="_blank">
                <i class="fa fa-github-alt fa-4x"></i>
              </a>
              <a href="http://sg.linkedin.com/pub/yan-han-pang/92/158/91b" target="_blank">
                <i class="fa fa-linkedin fa-4x"></i>
              </a>
              <a href="https://twitter.com/yanhan_pang" target="_blank">
                <i class="fa fa-twitter fa-4x"></i>
              </a>
            </div>
            <div class="header-icons show-for-small-only">
              <a href="../atom.xml" target="_blank">
                <i class="fa fa-rss-square fa-2x"></i>
              </a>
              <a href="https://github.com/yanhan" target="_blank">
                <i class="fa fa-github-alt fa-2x"></i>
              </a>
              <a href="http://sg.linkedin.com/pub/yan-han-pang/92/158/91b" target="_blank">
                <i class="fa fa-linkedin fa-2x"></i>
              </a>
              <a href="https://twitter.com/yanhan_pang" target="_blank">
                <i class="fa fa-twitter fa-2x"></i>
              </a>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="small-12 columns">
            <nav class="header nav-collapse">
              <ul>
                <li><a class="extra" href="../">home</a></li>
                <li><a class="extra" href="../about.html">about</a></li>
                <li><a class="extra" href="../bookshelf.html">bookshelf</a></li>
                <li><a class="extra" href="../interesting-talks.html">interesting talks</a></li>
                <li><a class="extra" href="../archive.html">archive</a></li>
              </ul>
            </nav>
          </div>
        </div>

        <div class="row">
          <div class="small-12 columns">
            <h2>On the Unofficial Bash Strict Mode by Aaron Maxwell</h2>
<p class="meta">
  25 Dec 2015,
  
    by <span class="italic">Pang Yan Han</span>
  
</p>
<div class="post-tags">
  <i class="fa fa-tags"></i>Tags: <a href="../tags/bash.html">bash</a>
</div>
<div class="post">
  <p>A few weeks ago, I chanced upon a blog post by Aaron Maxwell of <a href="http://redsymbol.net/">redsymbol.net</a>, titled <a href="http://redsymbol.net/articles/unofficial-bash-strict-mode/">Use the Unofficial Bash Strict Mode (Unless you Looove Debugging)</a>. I thought it was brilliant, and just want to share some of my thoughts after having used this unofficial bash strict mode since that time.</p>
<p>If you haven’t read Aaron’s blog post, you should.</p>
<p>If you haven’t started using his unofficial bash strict mode, you should, too.</p>
<h2 id="the-evolution-of-my-original-unofficial-bash-strict-mode">The evolution of my original unofficial bash strict mode</h2>
<p>For a very long time before I read Aaron’s blog post, this was my unofficial bash strict mode, which I used in most of my bash scripts:</p>
<div class="highlight"><pre><span></span><span class="nb">set</span> -e
</pre></div>

<p>It is certainly much less comprehensive than Aaron’s unofficial bash strict mode, having the effect of erroring out on commands which return a non-zero exit code. But this flag alone eased a lot of debugging pain for bash scripts.</p>
<p>After some time, I encountered <code>set -u</code>, which errors out on the use of undefined variables. So my unofficial bash strict mode became:</p>
<div class="highlight"><pre><span></span><span class="nb">set</span> -eu
</pre></div>

<p>which is just 2 things shy of Aaron’s unofficial bash strict mode. With <code>set -u</code>, debugging bash scripts becomes even easier, since use of undefined variables is a big source of bugs, especially when we factor in typos.</p>
<h2 id="thoughts-on-the-other-2-flags">Thoughts on the other 2 flags</h2>
<p>In fact, with <code>set -eu</code>, writing bash scripts becomes very smooth for me. So as much as Aaron’s blog post convinced me that his unofficial bash strict mode was superior to the one I’ve been using, after adopting its usage, I didn’t really detect much noticeable difference in how <code>set -o pipefail</code> and <code>IFS=$'\n\t'</code> helped with debugging, or how I had to adjust my code to work around some of their quirks.</p>
<p>That being said, if I were to choose among those 2 to aid in the ease of writing bash scripts, it’ll be:</p>
<div class="highlight"><pre><span></span><span class="nb">set</span> -o pipefail
</pre></div>

<p>Since that is such a natural next step from <code>set -eu</code>. And detecting intermediate failures in a very long chain of commands in a pipeline is an extremely welcome addition.</p>
<p>As for <code>IFS=$'\n\t'</code>, while it does seem useful, I’m still a bit confused about bash arrays and don’t use them too often in my bash scripts. For string manipulation, I rely on a mix of <code>grep</code>, <code>perl</code> and a little bit of <code>sed</code> and when I’m really really confused about those 3 tools, I stick to a trusty Python script. So it is probably the least useful addition to my arsenal. Hopefully I’ll be making full use of it as my bash-fu improves. But the thing about bash is, it is actually quite difficult to pick up, or at least it gives people the impression of that. There is probably some truth to both, seeing how quite a number of programmers I know don’t know how to write bash scripts and see it as some kind of alien language when I get them to fire up their text editor to open a bash script I’ve written so we can debug something in it together; and for those who know how to write them, it certainly isn’t their favourite language and they’d rather avoid it if possible.</p>
<h2 id="finally">Finally…</h2>
<p>Wishing all readers a Merry Christmas! If you didn’t know about Aaron’s unofficial bash strict mode:</p>
<div class="highlight"><pre><span></span><span class="nb">set</span> -euo pipefail
<span class="nv">IFS</span><span class="o">=</span><span class="s1">$'\n\t'</span>
</pre></div>

<p>I hope this is a good Christmas gift for you. Happy Holidays!</p>
</div>
<div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'pangyanhan'; // required: replace example with your forum shortname
        var disqus_identifier = "posts/2015-12-25-on-the-unofficial-bash-strict-mode-by-aaron-maxwell.md";
        var disqus_url = "http://blog.pangyanhan.com/posts/2015-12-25-on-the-unofficial-bash-strict-mode-by-aaron-maxwell.html";

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

          </div>
        </div>

        <div class="row footer">
          <div class="medium-12 columns">
            <div class="footer-item">
              <span>Github</span>
              <a href="https://github.com/yanhan/">github.com/yanhan</a>
            </div>
            <div class="hakyll-line">
              Site proudly generated by
              <a href="http://jaspervdj.be/hakyll" target="_blank">Hakyll</a>
            </div>
          </div>
        </div>
      </div>

      <script src="../js/vendor/jquery.js"></script>
      <script src="../js/foundation.min.js"></script>
      <script>
        $(document).foundation();
        var navigation = responsiveNav(".nav-collapse", {
          animate: true,
          transition: 284,
          label: "",
          insert: "after",
          openPos: "relative",
          navActiveClass: "js-nav-active"
        });
      </script>
    </body>
</html>
