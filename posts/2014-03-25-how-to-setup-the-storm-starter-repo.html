<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>How to setup the storm-starter repo - Yan Han's blog</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="author" content="Pang Yan Han">
        <link rel="stylesheet" href="../css/normalize.css">
        <link rel="stylesheet" href="../css/foundation.min.css">
        <link rel="stylesheet" href="../css/responsive-nav.css">
        <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Inconsolata" rel="stylesheet" type="text/css">

        <!-- syntax highlighting CSS -->
        <link rel="stylesheet" href="../css/my-pygments-colorscheme.css">
        <link rel="stylesheet" href="../css/main.css">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css">

        <script src="../js/vendor/modernizr.js"></script>
        <script src="../js/responsive-nav.min.js"></script>
        <script type="text/x-mathjax-config">
          MathJax.Hub.Config({
            tex2jax: {
              inlineMath: [ ["\\(", "\\)"] ],
              processEscapes: true
            }
          });
        </script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
        </script>
    </head>

    <body>
      <div class="site">
        <div class="row">
          <div class="small-6 columns">
            <h1 class="title"><a href="../">yan han's blog</a></h1>
          </div>
          <div class="small-6 columns">
            <div class="header-icons header-icons-translate show-for-medium-up">
              <a href="../atom.xml" target="_blank">
                <i class="fa fa-rss-square fa-4x"></i>
              </a>
              <a href="https://github.com/yanhan" target="_blank">
                <i class="fa fa-github-alt fa-4x"></i>
              </a>
              <a href="http://sg.linkedin.com/pub/yan-han-pang/92/158/91b" target="_blank">
                <i class="fa fa-linkedin fa-4x"></i>
              </a>
              <a href="https://twitter.com/yanhan_pang" target="_blank">
                <i class="fa fa-twitter fa-4x"></i>
              </a>
            </div>
            <div class="header-icons show-for-small-only">
              <a href="../atom.xml" target="_blank">
                <i class="fa fa-rss-square fa-2x"></i>
              </a>
              <a href="https://github.com/yanhan" target="_blank">
                <i class="fa fa-github-alt fa-2x"></i>
              </a>
              <a href="http://sg.linkedin.com/pub/yan-han-pang/92/158/91b" target="_blank">
                <i class="fa fa-linkedin fa-2x"></i>
              </a>
              <a href="https://twitter.com/yanhan_pang" target="_blank">
                <i class="fa fa-twitter fa-2x"></i>
              </a>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="small-12 columns">
            <nav class="header nav-collapse">
              <ul>
                <li><a class="extra" href="../">home</a></li>
                <li><a class="extra" href="../about.html">about</a></li>
                <li><a class="extra" href="../haskell">Haskell</a></li>
                <li><a class="extra" href="../bookshelf.html">bookshelf</a></li>
                <li><a class="extra" href="../interesting-talks.html">interesting talks</a></li>
                <li><a class="extra" href="../archive.html">archive</a></li>
              </ul>
            </nav>
          </div>
        </div>

        <div class="row">
          <div class="small-12 columns">
            <h2>How to setup the storm-starter repo</h2>
<p class="meta">
  25 Mar 2014,
  
    by <span class="italic">Pang Yan Han</span>
  
</p>
<div class="post-tags">
  <i class="fa fa-tags"></i>Tags: <a href="../tags/storm.html">storm</a>
</div>
<div class="post">
  <p>Just today, I have faced an issue which took up (wasted) several hours of my time in a rather painful way, so I thought I should share my findings so that others do not repeat the same mistake.</p>
<p>I was learning <a href="http://storm.incubator.apache.org/">Storm</a> and one of the resources I found was the <a href="https://github.com/apache/incubator-storm/tree/master/examples/storm-starter">storm-starter</a> repository. While I was disappointed that there were no instructions for setup using Leiningen (other than a one-liner pointing to the Leiningen repo, more on this towards the end of this article), I proceeded to set up Maven, and ran the <code>WordCountTopology</code> using:</p>
<div class="highlight"><pre><span></span>mvn compile exec:java -Dstorm.topology=storm.starter.WordCountTopology
</pre></div>

<p>however, this was met with rather cryptic error messages from Maven (which I shall omit here due to my frustration earlier today) and it took me literally hours of googling, trying the command and variations of the command at both the root directory of the repo and the <code>examples/storm-starter</code> directory, appending those directories to <code>CLASSPATH</code>, all of which did not get me any closer to solving the problem.</p>
<p>It turns out that the solution is simple. Instead of using the above storm-starter repository, use <a href="https://github.com/nathanmarz/storm-starter">this one</a> instead, and follow the same instructions. One thing to take note of is that in this repository, the <code>pom.xml</code> file is named <code>m2-pom.xml</code> . So to execute the WordCountTopology code, you will run the command:</p>
<div class="highlight"><pre><span></span>mvn -f m2-pom.xml compile exec:java -Dstorm.topology=storm.starter.WordCountTopology
</pre></div>

<p>A kind reader, Jorge Plaza, has pointed out that the following series of commands will work too (Thank you Jorge!). If you can’t run the WordCountTopology with the above command, these should do the trick:</p>
<div class="highlight"><pre><span></span>mvn -f m2-pom.xml clean
mvn -f m2-pom.xml package
storm jar target/storm-starter-0.0.1-SNAPSHOT.jar storm.starter.WordCountTopology
</pre></div>

<p><strong>A note of caution:</strong> this make use of the <a href="https://github.com/nathanmarz/storm/wiki/Command-line-client">storm client</a> and if you’ve set up the Storm client to deploy to a production server, that is what the <code>storm jar</code> command will do. However, if you’ve not set up the Storm client to deploy to a production server, the <code>storm jar</code> command will run the WordCountTopology on your local machine.</p>
<p>It makes me wonder why the repository was moved in the first place. Worse, the documentation is not up to date. I don’t mean to criticize anyone, but I personally believe that documentation to do with setting things up should be accurate, especially for a repository like this which is meant for someone new to Storm. Not exactly the best welcome party.</p>
<h2 id="final-notes">Final notes</h2>
<p>Based on <a href="https://github.com/apache/incubator-storm/pull/54">this pull request</a>, it seems that Leiningen cannot be used to set up the storm-starter repository.</p>
<p>I have a few more blog posts queueing up (for quite some time), but I decided to work on this one because it’ll be a very quick write up, and the issue described here caused me a lot of frustration.</p>
</div>
<div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'pangyanhan'; // required: replace example with your forum shortname
        var disqus_identifier = "posts/2014-03-25-how-to-setup-the-storm-starter-repo.md";
        var disqus_url = "http://blog.pangyanhan.com/posts/2014-03-25-how-to-setup-the-storm-starter-repo.html";

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

          </div>
        </div>

        <div class="row footer">
          <div class="medium-12 columns">
            <div class="footer-item">
              <span>Github</span>
              <a href="https://github.com/yanhan/">github.com/yanhan</a>
            </div>
            <div class="hakyll-line">
              Site proudly generated by
              <a href="http://jaspervdj.be/hakyll" target="_blank">Hakyll</a>
            </div>
          </div>
        </div>
      </div>

      <script src="../js/vendor/jquery.js"></script>
      <script src="../js/foundation.min.js"></script>
      <script>
        $(document).foundation();
        var navigation = responsiveNav(".nav-collapse", {
          animate: true,
          transition: 284,
          label: "",
          insert: "after",
          openPos: "relative",
          navActiveClass: "js-nav-active"
        });
      </script>
      <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create', 'UA-49506023-1', 'pangyanhan.com');ga('send', 'pageview');</script>
    </body>
</html>
